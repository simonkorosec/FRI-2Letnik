typ int:integer;
typ str:string;

var arr2d:arr[10]arr[10] int;

var seed:int;
var testString:string;

fun rand(i:int):int = (
    {seed = (8121 * seed + 28411) % 134456},
    seed
);

fun fib(i:int):int = (
    {if (i<3) then (
        {r1=1}
    ) else (
        {r1=fib(i-1)},
        {r1=r1+fib(i-2)}
    )},
    r1
){where var r1:int};

fun pStr(s:str):int = (
    putString(s)
);

fun gStr(s:str):str = (
    getString('')
);

fun pInt(s:int):int = (
    putInt(s)
);

fun gInt(s:int):int = (
    getInt(0)
);

fun fill2darr(l:int):int = (
    {for i = 0, l, 1 : (
        {for j = 0, l, 1 : (
            {arr2d[i][j] = rand(0) % 100}
        )}
    )},
    0
) {where var i:int;var j:int};

fun print2darr(l:int):int = (
    {for i = 0, l, 1 : (
        {for j = 0, l, 1 : (
            pInt(arr2d[i][j])
        )}
    )},
    0
) {where var i:int;var j:int};


fun whileTest(n:int): int = (
    {i = 0},
    {while i < n: (
        pStr(testString),
        {i = i+1}
    )},
    i
) {where var i : int};

fun main(i:int):int = (
    pStr('Which fibonacci number?'),
    {seed = fib(gInt(0))},
    pStr('It`s'),
    putInt(seed),
    pStr('Press enter to continue.'),
    gStr(''),
    fill2darr(10),
    print2darr(10),
    pStr('Input string:'),
    {testString = gStr('')},
    pStr(''),
    whileTest(5)
)
